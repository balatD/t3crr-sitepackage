<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:cp="http://typo3.org/ns/Db/T3CRRSitepackage/ViewHelpers"
      data-namespace-typo3-fluid="true">

<f:variable name="header">
    <f:for each="{data.header -> cp:iterator.explode(glue: 'constant:LF')}" as="line" iteration="iterator">
        <span class="{f:if(condition: iterator.isFirst, then: 'underline')}">{line}</span><br>
    </f:for>
</f:variable>

<div class="colored-background" id="c{data.uid}">
    <f:if condition="{files.0}">
        <div class="background-image {files.0.referenceProperties.position}" role="img" aria-label="{files.0.alternative}">
            <div class="container">
                <div class="element-content">
                    <h2 class="mb-4">{header -> f:format.raw()}</h2>
                    <p>{data.bodytext}</p>
                    <f:link.typolink parameter="{data.header_link}" class="btn white">{f:if(condition: data.subheader, then: data.subheader, else: 'weiterlesen')}</f:link.typolink>
                </div>
            </div>

            <svg id="svg-colored-bg-desktop" width="845px" height="751px" viewBox="0 0 845 751" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <defs>
                    <path d="M844.266293,0 L137.542917,0 L6.21186293,524.057459 C-22.4807098,638.550424 64.103761,749.510878 182.137483,749.510878 L844.266293,749.510878 L844.266293,0 Z" id="colored-bg-path-desktop"></path>
                </defs>
                <g id="svg-colored-bg-mask-desktop-g">
                    <mask id="svg-colored-bg-mask-desktop" fill="white">
                        <use xlink:href="#colored-bg-path-desktop"></use>
                    </mask>
                    <f:if condition="{files.0}">
                        <f:variable name="image">{f:uri.image(image: files.0, width: '844', height: '749c', cropVariant: 'default')}</f:variable>
                        <f:variable name="width">{cp:resource.imageSize(dimension: 'width')}</f:variable>
                        <f:variable name="height">{cp:resource.imageSize(dimension: 'height')}</f:variable>
                        <image mask="url(#svg-colored-bg-mask-desktop)" href="{image}" width="{width}" height="{height}"></image>
                    </f:if>
                </g>
            </svg>

            <svg id="svg-colored-bg-mobile" width="1021" height="856" viewBox="0 0 1021 856" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <path d="M0 0H1020.41L792.18 649.567C751.693 764.798 628.2 828.289 510.926 794.165L0 645.5V0Z" fill="#C4C4C4" id="colored-bg-path-mobile" />
                </defs>
                <g id="colored-bg-path-mobile-g" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <mask id="svg-colored-bg-mask-mobile" fill="white" mask-type="alpha">
                        <use xlink:href="#colored-bg-path-mobile"></use>
                    </mask>
                    <f:if condition="{files.0}">
                        <f:variable name="image">{f:uri.image(image: files.0, width: '1100', height: '1100c', cropVariant: 'default')}</f:variable>
                        <f:variable name="width">{cp:resource.imageSize(dimension: 'width')}</f:variable>
                        <f:variable name="height">{cp:resource.imageSize(dimension: 'height')}</f:variable>
                        <image mask="url(#svg-colored-bg-mask-mobile)" x="0" y="-100" href="{image}" width="{width}" height="{height}"></image>
                    </f:if>
                </g>
            </svg>
        </div>
    </f:if>
</div>

</html>
